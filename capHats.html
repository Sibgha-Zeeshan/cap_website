<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>shopCap</title>
    <link rel="shortcut icon" type="image" href="assets/cap-logo.PNG" />
    <!-- FontAwesome Icons -->
    <script
      src="https://kit.fontawesome.com/3a567faff4.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="style.css" />

  </head>
  <body>
   
    <section class="feature_productsCH">
      <header class="header">
        <nav class="navbar">
          <div class="logo">
            <span>CapShop</span>
          </div>
          <input type="checkbox" id="click">
          <label for="click" class="menu-btn">
          <i class="fas fa-bars"></i>
          </label>
          <ul>
            <li class="nav_left">
              
             <a href="index.html"><i class="fa-solid fa-shop fa-beat-fade"></i>Home</a>
  
            </li>
            <li class="nav_right">
             
              <a href="checkout.html"> <i class="fa-solid fa-credit-card fa-bounce" ></i>Checkout</a>
             
            </li>
          </ul>
      
            <div class="nav_right">
             
              <div class="iconCart">

              <img src="assets/icon.png" />
          <div class="totalQuantity">0</div>
              </div>
         </nav>
         
       
      </header>
        
        <h1 class="section_heading">All Collection</h1>
        <h3 class="section_subheading">Hats and Caps</h3>
     
   
      <div class="product_container">
        <!-- <div class="swiper-wrapper "> -->
        <div class="card_collectionhat">
          <!-- <div class="cuntainer"> -->
            <img src="assets/hat1.jpg" alt="" />
          <!-- </div> -->
          <div class="product_name">Trend Tribe</div>
          <div class="product_price">400pkr</div>
          <h4 class="productDetails">Product Details:</h4>
          <p class="productDescription">
            Lorem ipsum dolor sit amet consectetur
          </p>

          <button class="addcartbtn animate_animated animate__slideOutDown">ADD TO CART
           
          </button>
        </div>
      </div>
    </section>
    <!-- Cart div start -->
    <div class="cart">
      <h2>CART</h2>

      <div class="listCart">
        <div class="item">
          <img src="assets/hat1.jpg" />
          <div class="content">
            <div class="name">Trend Tribe</div>
            <div class="price">$550 / 1 product</div>
          </div>
          <div class="quantity">
            <button>-</button>
            <span class="value">3</span>
            <button>+</button>
          </div>
        </div>
      </div>

      <div class="buttons">
        <div class="close">CLOSE</div>
        <div class="checkout">
          <a href="checkout.html">CHECKOUT</a>
        </div>
      </div>
    </div>
     <!-- Cart div end -->
<!-- FOOTER -->
<!-- Footer Section -->
<footer class="footer_section" id="footer">
  <span class="overlay"> </span>
  <div class="footer_container">
    <!-- FAQS AND TERMS OF SERVICE -->
    <ul class="footer_links">
      <h4><strong>KNOW ABOUT US MORE</strong></h4>
      
      <li>
        <a href="#footer" class="footer_link show-modal"
          >Frequently Asked Questions</a
        >

        <div class="accordion">
          <div class="accordion-content">
            <header>
              <span class="title"> When will I get my order?</span>
              <i class="fa-solid fa-plus"></i>
            </header>

            <p class="description">
             
              Every order is made to order and it takes approximately 2-7 business days to process and fulfill. After that, shipping time will vary depending on which shipping option you choose at checkout. Please keep in mind, these dates are an estimate, not a guarantee. Depending on where you live, some orders may take longer. 
            </p>
          </div>

          <div class="accordion-content">
            <header>
              <span class="title"> Can I cancel my order and get a refund?</span>
              <i class="fa-solid fa-plus"></i>
            </header>

            <p class="description">
             
              Yes, but only if your order has not begun fulfillment and/or shipped. 
            </p>
          </div>
          <div class="accordion-content">
            <header>
              <span class="title"> Do you take exchanges/returns?</span>
              <i class="fa-solid fa-plus"></i>
            </header>

            <p class="description">
             
              All sales are final. Because each item is made to order, we are unable to offer exchanges and/or returns. If there are any issues with your items, please contact us within 14 days of receiving the product.
            </p>
          </div>
          <div class="accordion-content">
            <header>
              <span class="title"> What are Custom Fees/Duties/Taxes?</span>
              <i class="fa-solid fa-plus"></i>
            </header>

            <p class="description">
             
Customs charges may apply depending on your country. International shipments are subject to customs duties and may vary depending on your destination country, order value, country limits and other factors. This fee is your responsibility. 
            </p>
          </div>

          <div class="buttons">
            <button class="close-btn">Close</button>
          </div>
        </div>
      </li>
      <li>
        <a href="#" class="footer_link">Terms of Service</a>
      </li>
    </ul>
    <!-- SOCIALS LINKS -->
    <div class="footer_socials">
      <h4><strong>FOLLOW US</strong></h4>

      <a href="" class="footer_social">
        <i class="fa-brands fa-facebook"></i>
      </a>
      <a href="" class="footer_social">
        <i class="fa-brands fa-square-instagram"></i>
      </a>
     
    </div>
    <!-- SUBSCRIBE TO NEWSLETTER -->
    <div class="newletter">
      <div class="newsletter_data">
        <i class="fa-solid fa-envelope-open-text cap_icon"></i>
        <h4><strong>SUBSCRIBE TO GET OUR NEWSLETTER</strong></h4>
      </div>
      <form action="" class="newsletter_form">
        <input type="text" placeholder="Enter your email..." />
      </form>
    </div>
  </div>
  <div class="copy_footer">
    <i class="fa-regular fa-copyright copy_icon"></i>
    <span class="copy_text">CAPSHOP 2023</span>
  </div>
</footer>
 
  <script src="raw.githubusercontent.com_jlmakes_scrollreveal_master_dist_scrollreveal.min.js">
    
  </script>
  <script>
    // --------------POP UP MODAL //////////////////////////////////////////
 const section = document.querySelector("footer"),
 overlay = document.querySelector(".overlay"),
 showBtn = document.querySelector(".show-modal"),
 closeBtn = document.querySelector(".close-btn");

showBtn.addEventListener("click", () => section.classList.add("active"));

overlay.addEventListener("click", () =>
 section.classList.remove("active")
);

closeBtn.addEventListener("click", () =>
 section.classList.remove("active")
);
// ------------------FAQ MODAL ---------------------//
const accordionContent = document.querySelectorAll(".accordion-content");

accordionContent.forEach((item, index) => {
   let header = item.querySelector("header");
   header.addEventListener("click", () =>{
       item.classList.toggle("open");

       let description = item.querySelector(".description");
       if(item.classList.contains("open")){
           description.style.height = `${description.scrollHeight}px`; //scrollHeight property returns the height of an element including padding , but excluding borders, scrollbar or margin
           item.querySelector("i").classList.replace("fa-plus", "fa-minus");
       }else{
           description.style.height = "0px";
           item.querySelector("i").classList.replace("fa-minus", "fa-plus");
       }
       removeOpen(index); //calling the funtion and also passing the index number of the clicked header
   })
})

function removeOpen(index1){
   accordionContent.forEach((item2, index2) => {
       if(index1 != index2){
           item2.classList.remove("open");

           let des = item2.querySelector(".description");
           des.style.height = "0px";
           item2.querySelector("i").classList.replace("fa-minus", "fa-plus");
       }
   })
}
let products = null;
// get data from file json
fetch('product.json')
    .then(response => response.json())
    .then(data => {
        products = data;
        addDataToHTML();
        
})

//show datas product in list 
function addDataToHTML(){
    // remove datas default from HTML
    let listProductHTML = document.querySelector('.product_container');
    listProductHTML.innerHTML = '';
// <button onclick="addCart(${product.id})">Add To Cart </button>
    // add new datas
    if(products != null) // if has data
    {
        products.forEach(product => {
            let newProduct = document.createElement('div');
            newProduct.classList.add('card_collectionhat');
            newProduct.innerHTML = 
            `<img src="${product.image}" alt="">
            <div class="product_name">${product.name}</div>
            <div class="product_price">${product.price} pkr </div>
            <p class="productDescription">
            ${product.detail}
          </p>
            
            <button  onclick="addCart(${product.id})">

<i class="fa-solid fa-cart-shopping"></i>
</button>`;

            listProductHTML.appendChild(newProduct);

        });
    }
}
//use sessionStorage so the cart doesn't get lost on refresh page
let listCart = null;
function checkCart(){
    if(sessionStorage.getItem("listCart")){
        listCart = JSON.parse(sessionStorage.getItem("listCart"));
    }else{
        listCart = [];
    }
}
checkCart();
function addCart($idProduct){
    let productsCopy = JSON.parse(JSON.stringify(products));
    //// If this product is not in the cart
    if(!listCart[$idProduct]) 
    {
        listCart[$idProduct] = productsCopy.filter(product => product.id == $idProduct)[0];
        listCart[$idProduct].quantity = 1;
    }else{
        //If this product is already in the cart.
        //I just increased the quantity
        listCart[$idProduct].quantity++;
    }
    sessionStorage.setItem("listCart", JSON.stringify(listCart));
    addCartToHTML();
}
addCartToHTML();
function addCartToHTML(){
    // clear data default
    let listCartHTML = document.querySelector('.listCart');
    listCartHTML.innerHTML = '';

    let totalHTML = document.querySelector('.totalQuantity');
    let totalQuantity = 0;
    // if has product in Cart
    if(listCart){
        listCart.forEach(product => {
            if(product){
                let newCart = document.createElement('div');
                newCart.classList.add('item');
                newCart.innerHTML = 
                    `<img src="${product.image}">
                    <div class="content">
                        <div class="name">${product.name}</div>
                        <div class="price">${product.price} pkr / 1 product</div>
                    </div>
                    <div class="quantity">
                        <button onclick="changeQuantity(${product.id}, '-')">-</button>
                        <span class="value">${product.quantity}</span>
                        <button onclick="changeQuantity(${product.id}, '+')">+</button>
                    </div>`;
                listCartHTML.appendChild(newCart);
                totalQuantity = totalQuantity + product.quantity;
            }
        })
    }
    totalHTML.innerText = totalQuantity;
}
function changeQuantity($idProduct, $type){
    switch ($type) {
        case '+':
            listCart[$idProduct].quantity++;
            break;
        case '-':
            listCart[$idProduct].quantity--;

            // if quantity <= 0 then remove product in cart
            if(listCart[$idProduct].quantity <= 0){
                delete listCart[$idProduct];
            }
            break;

        default:
            break;
    }
    // save new data in sessionStorage
    sessionStorage.setItem("listCart", JSON.stringify(listCart));
    // reload html view cart
    addCartToHTML();
}

// -------------------FOOTER AND FAQ MODAL FINISHED -------------------/////
const iconCart = document.querySelector('.iconCart');
const cart = document.querySelector('.cart');
const container = document.querySelector('.feature_productsCH');
const close = document.querySelector('.close');

iconCart.addEventListener('click', function(){
    if(cart.style.right == '-100%'){
        cart.style.right = '0';
        container.style.transform = 'translateX(-400px)';
    }else{
        cart.style.right = '-100%';
        container.style.transform = 'translateX(0)';
    }
})
close.addEventListener('click', function (){
    cart.style.right = '-100%';
    container.style.transform = 'translateX(0)';
})
// 
const sr = ScrollReveal({
    origin:'top',
    distance:'70px',
    duration:3500,
    delay: 400,
    // reset:true (animations repeat)
}) 
 sr.reveal('.banner_text,.section_heading,.section_subheading,.see_collection,.promo_1IMG img,.promo2Card',{origin:'left'});
    sr.reveal('.product_container',{interval:100});
  </script>
  
  </body>
</html>
